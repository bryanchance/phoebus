<script>
  function enableChangePassword() {
    var elm = document.getElementById('account-password');
    elm.setAttribute('form', 'account-metadata');
    elm.setAttribute('type', 'password');
    elm.setAttribute('size', '30');
    elm.setAttribute('placeholder', 'New Password');
    elm.setAttribute('minlength', '8');
    elm.setAttribute('maxlength', '128');
    elm.setAttribute('autocomplete', 'off');
    elm.setAttribute('required', '');
    elm.removeAttribute('value');
  }
</script>
<h2>{$PAGE_TITLE}</h2>

<table class="addonTable single-row" metadata>
  <tr>
    <th>Property</th>
    <th>Value</th>
  </tr>
  <tr>
    <td>Status</td>
    <td>
      {if $USER_LEVEL >= 3}
      <input form="account-metadata" name="active" type="checkbox" value="1" {if $PAGE_DATA.active}checked{/if} />
      {else}
      <img src="{$BASE_PATH}../shared/{if $PAGE_DATA.active}accept{else}delete{/if}.png" class="aligntop" />
      {/if}
      Active
    </td>
  </tr>
  <tr>
    <td>Level</td>
    <td>
      {if $USER_LEVEL >= 3}
        <select form="account-metadata" name="level" style="width: 202px;">
          <option {if $PAGE_DATA.level == 1}selected="selected" {/if}value="1">1 - Add-on Developer</option>
          <option {if $PAGE_DATA.level == 2}selected="selected" {/if}value="2">2 - Advanced/Legacy Developer</option>
          <option {if $PAGE_DATA.level == 3}selected="selected" {/if}value="3">3 - Add-ons Team Member</option>
          <option {if $PAGE_DATA.level == 4}selected="selected" {/if}value="4">4 - Add-ons Team Leader</option>
          <option {if $PAGE_DATA.level == 5}selected="selected" {/if}value="5">5 - Phoebus Administrator</option>
        </select>
      {else}
        {if $PAGE_DATA.level == 1}
          1 - Add-on Developer 
        {elseif $PAGE_DATA.level == 2}
          2 - Advanced/Legacy Add-on Developer
        {elseif $PAGE_DATA.level == 3}
          3 - Add-ons Team Member
        {elseif $PAGE_DATA.level == 4}
          4 - Add-ons Team Leader
        {elseif $PAGE_DATA.level == 5}
          5 - Phoebus Administrator
        {else}
          Unknown
        {/if}
      {/if}
    </td>
  </tr>
  <tr>
    <td>Username</td>
    <td>{$PAGE_DATA.username}</td>
  </tr>
  <tr>
    <td>Display Name</td>
    <td><input form="account-metadata" name="displayName" type="text" size="30" value="{$PAGE_DATA.displayName}" required/></td>
  </tr>
  <tr>
    <td>E-mail Address</td>
    <td><input form="account-metadata" name="email" type="email" size="30" value="{$PAGE_DATA.email}" required/></td>
  </tr>
  <tr>
    <td>Password</td>
    <td><input id="account-password" name="password" type="button" value="Change&hellip;" onclick="enableChangePassword();" />
    </td>
  </tr>
</table>

<br />

<form id="account-metadata" accept-charset="UTF-8" autocomplete="off" method="POST" >
  <input type="hidden" name="username" value="{$PAGE_DATA.username}" />
  <button type="submit" value="Submit" style="float: right;">Update</button><br />
</form>

{if $USER_LEVEL >= 3}
<h2>{$PAGE_TITLE}</h2>
<table class="addonTable single-row">
  <tr>
    <th colspan="2" style="text-align: center;"></th>
    <th>Name</th>
    <th>Slug</th>
    <th>ID</th>
    <th>Type</th>
    <th style="text-align: center;">Active</th>
    <th style="text-align: center;">Reviewed</th>
  </tr>
  {foreach $EXTRA_DATA as $key}
    <tr>
      <td style="width: 16px;">
        <a href="{$PAGE_PATH}?task=update&what=metadata&slug={$key.slug}" title="Edit Add-on Metadata">
          <img src="{$BASE_PATH}../shared/pencil.png" alt="Edit Add-on" />
        </a>
      </td>
      <td style="width: 20px;">
        {if $key.type != 'external'}
        <a href="{$PAGE_PATH}?task=update&what=release&slug={$key.slug}" title="Release a new version of this Add-on">
          <img src="{$BASE_PATH}../shared/plugin_add.png" alt="New Version" />
        </a>
        {/if}
      </td>
      <td class="cell-ellipsis">{$key.name}</td>
      <td class="cell-ellipsis">{$key.slug}</td>
      <td>{$key.id}</td>
      <td class="cell-ellipsis">{$key.type|capitalize}</td>
      <td style="text-align: center; width: 64px;">
        {if $key.active}
          <img src="{$BASE_PATH}../shared/accept.png" />
        {else}
          <img src="{$BASE_PATH}../shared/delete.png" />
        {/if}
      </td>
      <td style="text-align: center; width: 64px;">
        {if $key.reviewed}
          <img src="{$BASE_PATH}../shared/accept.png" />
        {else}
          <img src="{$BASE_PATH}../shared/delete.png" />
        {/if}
      </td>
    </tr>
  {/foreach}
</table>
{/if}